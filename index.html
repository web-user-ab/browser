<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safari-Style Web Browser</title>
    <style>
        /* General Styles */
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            height: 100vh;
            background-color: #f5f5f7;
        }

        /* Tab Bar */
        #tabBar {
            display: flex;
            background: #ececec;
            padding: 5px;
            border-bottom: 2px solid #d1d1d1;
            overflow-x: auto;
            white-space: nowrap;
        }

        .tab {
            background: #ffffff;
            border: 1px solid #c0c0c0;
            padding: 5px 15px;
            margin: 2px;
            border-radius: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
        }

        .tab.active {
            background: white;
            font-weight: bold;
            border-bottom: 2px solid #007aff;
        }

        .closeTab {
            margin-left: 10px;
            cursor: pointer;
            color: red;
            font-weight: bold;
        }

        /* Toolbar */
        #toolbar {
            display: flex;
            align-items: center;
            padding: 10px;
            background: #ececec;
        }

        button {
            background: none;
            border: none;
            font-size: 16px;
            margin: 0 5px;
            cursor: pointer;
        }

        input {
            flex: 1;
            padding: 5px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
        }

        /* Browser Frame */
        .browserFrame {
            flex: 1;
            width: 100%;
            border: none;
            background: white;
        }
    </style>
</head>
<body>

    <!-- Tabs -->
    <div id="tabBar">
        <button onclick="newTab()">âž• New Tab</button>
    </div>

    <!-- Toolbar -->
    <div id="toolbar">
        <button onclick="goBack()">â—€</button>
        <button onclick="goForward()">â–¶</button>
        <button onclick="reloadPage()">ðŸ”„</button>
        <input id="urlBar" type="text" placeholder="Enter URL..." onkeydown="if(event.key==='Enter') loadPage()">
        <button onclick="loadPage()">Go</button>
    </div>

    <!-- Browser Area -->
    <div id="browserArea"></div>

    <script>
        let tabCount = 0;
        let tabs = [];

        function newTab(url = "https://www.apple.com") {
            tabCount++;
            const tabId = "tab" + tabCount;

            // Create tab button
            const tab = document.createElement("div");
            tab.classList.add("tab");
            tab.id = tabId;
            tab.innerHTML = `Tab ${tabCount} <span class="closeTab" onclick="closeTab('${tabId}')">âœ–</span>`;
            tab.onclick = () => switchTab(tabId);
            document.getElementById("tabBar").appendChild(tab);

            // Create iframe
            const iframe = document.createElement("iframe");
            iframe.classList.add("browserFrame");
            iframe.id = "frame" + tabCount;
            iframe.src = formatURL(url);
            iframe.sandbox = "allow-scripts allow-same-origin allow-forms allow-popups";
            document.getElementById("browserArea").appendChild(iframe);

            // Save tab data
            tabs.push({ id: tabId, frameId: iframe.id, url: url });
            switchTab(tabId);
        }

        function switchTab(tabId) {
            tabs.forEach(tab => {
                document.getElementById(tab.id).classList.remove("active");
                document.getElementById(tab.frameId).style.display = "none";
            });

            const activeTab = tabs.find(tab => tab.id === tabId);
            if (activeTab) {
                document.getElementById(activeTab.id).classList.add("active");
                document.getElementById(activeTab.frameId).style.display = "block";
                document.getElementById("urlBar").value = activeTab.url;
            }
        }

        function closeTab(tabId) {
            const tab = tabs.find(t => t.id === tabId);
            if (!tab) return;

            // Remove tab and frame
            document.getElementById(tabId).remove();
            document.getElementById(tab.frameId).remove();

            // Remove from tabs array
            tabs = tabs.filter(t => t.id !== tabId);

            // Switch to another tab if any are left
            if (tabs.length > 0) {
                switchTab(tabs[0].id);
            }
        }

        function loadPage() {
            const url = formatURL(document.getElementById("urlBar").value);
            const activeTab = tabs.find(tab => document.getElementById(tab.id).classList.contains("active"));
            if (activeTab) {
                document.getElementById(activeTab.frameId).src = url;
                activeTab.url = url;
            }
        }

        function goBack() {
            const activeTab = tabs.find(tab => document.getElementById(tab.id).classList.contains("active"));
            if (activeTab) document.getElementById(activeTab.frameId).contentWindow.history.back();
        }

        function goForward() {
            const activeTab = tabs.find(tab => document.getElementById(tab.id).classList.contains("active"));
            if (activeTab) document.getElementById(activeTab.frameId).contentWindow.history.forward();
        }

        function reloadPage() {
            const activeTab = tabs.find(tab => document.getElementById(tab.id).classList.contains("active"));
            if (activeTab) document.getElementById(activeTab.frameId).src = document.getElementById(activeTab.frameId).src;
        }

        function formatURL(url) {
            if (!url.startsWith("http")) return "https://" + url;
            return url;
        }

        // Open first tab
        newTab();
    </script>

</body>
</html>
